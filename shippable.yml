language: python

python:
- 2.7

env:
  global:
  - SQLALCHEMY_DATABASE_URI="postgresql://postgres@localhost/test"

build:

  # pre_ci:
  # - docker build -t myImage:tip .

  pre_ci_boot:
    image_name: drydock/u14pytall
    image_tag: prod
    pull: true
    options: ""

  ci:
  - id
  - apt-get update
  - apt-get install --yes --no-install-recommends
        git-core
        libffi-dev
        libpq-dev
        python-dev
        python-pip
        python-wheel

  - pip install -r ./requirements-dev.txt
  - pip install -r ./requirements.txt

  - service postgresql start
  - psql -c "create database test;" -U postgres

  - ./run_tests

  # post_ci:
  # - docker build -t eu.gcr.io/u9docker/boilerplate .
  # - docker push eu.gcr.io/u9docker/boilerplate

# integrations:
#   hub:
#   - integrationName: u9docker
#     type: gcr
#     branches:
#       only:
#       - master
